#!/bin/bash

echo "=========================================="
echo "ISRO LUNABOT - FINAL LAUNCH COMMANDS"
echo "=========================================="
echo ""
echo "Run these commands in 5 SEPARATE terminals:"
echo ""

cat << 'EOF'

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
TERMINAL 1: Environment Monitor
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
cd /home/aids/lunabot_ws
source /opt/ros/humble/setup.bash
source install/setup.bash
ros2 run lunabot_maintenance env_monitor

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
TERMINAL 2: SLAM Mapping (Real-time map building)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
cd /home/aids/lunabot_ws
source /opt/ros/humble/setup.bash
source install/setup.bash
ros2 launch slam_toolbox online_async_launch.py \
  use_sim_time:=true \
  slam_params_file:=/opt/ros/humble/share/slam_toolbox/config/mapper_params_online_async.yaml

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
TERMINAL 3: Navigation Stack ⚠️ WAIT for SLAM to start!
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
cd /home/aids/lunabot_ws
source /opt/ros/humble/setup.bash
source install/setup.bash
ros2 launch nav2_bringup navigation_launch.py \
  use_sim_time:=true \
  params_file:=/home/aids/lunabot_ws/src/lunabot_navigation/config/nav2_params.yaml

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
TERMINAL 4: RViz Visualization
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
cd /home/aids/lunabot_ws
source /opt/ros/humble/setup.bash
source install/setup.bash
rviz2 -d /home/aids/lunabot_ws/src/lunabot_navigation/rviz/navigation.rviz

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
TERMINAL 5: Autonomous Patrol ⚠️ WAIT 10 sec after Terminal 3!
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
cd /home/aids/lunabot_ws
source /opt/ros/humble/setup.bash
source install/setup.bash
ros2 run lunabot_maintenance autonomous_patrol

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

IMPORTANT NOTES:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✓ Make sure Isaac Sim is running with PLAY pressed FIRST
✓ Wait for each terminal to fully start before launching the next
✓ SLAM will build the map as the robot moves
✓ In RViz, you should see:
  • LaserScan Front/Back: Red and white points (scan data)
  • Local Costmap: Red/pink obstacles around robot
  • Global Costmap: Full map with obstacles
  • Global Plan: Green line path
  • Local Plan: Red line trajectory
  • Robot Footprint: Green square showing robot position

✓ Robot will automatically:
  1. Build map using SLAM
  2. Navigate to waypoint 1 (3.0, 2.0)
  3. Navigate to waypoint 2 (1.0, 4.0)
  4. Navigate to waypoint 3 (-2.0, 1.0)
  5. Return to origin (0.0, 0.0)
  6. Repeat the patrol

✓ Environment monitor will track:
  • Temperature: 20-24°C (normal)
  • O2 Level: 19.5-23.5% (normal)
  • Pressure: 99-103 kPa (normal)
  • Robot Activity: ACTIVE when moving

EOF
